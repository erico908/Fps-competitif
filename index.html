<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mini CS Map Mobile</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; }
  #score {
    position: absolute;
    top: 10px;
    left: 10px;
    color:white;
    font-size:20px;
    z-index:100;
  }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
// ==== SCÈNE ====
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb); // ciel bleu

// ==== CAMÉRA ====
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,2,10);

// ==== RENDERER ====
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ==== LUMIÈRE ====
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(10,20,10);
scene.add(light);
scene.add(new THREE.AmbientLight(0x404040));

// ==== SOL ====
const floorGeo = new THREE.BoxGeometry(50,1,50);
const floorMat = new THREE.MeshPhongMaterial({color:0x808080});
const floor = new THREE.Mesh(floorGeo,floorMat);
floor.position.y=-0.5;
scene.add(floor);

// ==== MURS ====
const wallMat = new THREE.MeshPhongMaterial({color:0x555555});
function createWall(x,y,z,dx,dy,dz){
    const geo = new THREE.BoxGeometry(dx,dy,dz);
    const mesh = new THREE.Mesh(geo, wallMat);
    mesh.position.set(x,y,z);
    scene.add(mesh);
}
createWall(0,2.5,-25,50,5,1);
createWall(0,2.5,25,50,5,1);
createWall(-25,2.5,0,1,5,50);
createWall(25,2.5,0,1,5,50);

// ==== CIBLES ====
const targets = [];
const targetGeo = new THREE.BoxGeometry(1,1,1);
const targetMat = new THREE.MeshPhongMaterial({color:0xff0000});
function spawnTarget(){
    const x = Math.random()*40-20;
    const z = Math.random()*40-20;
    const mesh = new THREE.Mesh(targetGeo,targetMat);
    mesh.position.set(x,0.5,z);
    scene.add(mesh);
    targets.push(mesh);
}
for(let i=0;i<10;i++) spawnTarget();

// ==== BALLES ====
const bullets = [];
const bulletSpeed = 50;
function shoot(){
    const bulletGeo = new THREE.SphereGeometry(0.1,8,8);
    const bulletMat = new THREE.MeshBasicMaterial({color:0xffff00});
    const bullet = new THREE.Mesh(bulletGeo, bulletMat);
    bullet.position.copy(camera.position);
    const dir = new THREE.Vector3(0,0,-1);
    dir.applyQuaternion(camera.quaternion);
    bullet.userData = {dir: dir};
    scene.add(bullet);
    bullets.push(bullet);
}
document.addEventListener('click', shoot);
document.addEventListener('touchstart', shoot);

// ==== SCORE ====
let score=0;
function checkHit(){
    bullets.forEach((b,i)=>{
        targets.forEach((t,j)=>{
            if(b.position.distanceTo(t.position)<0.7){
                scene.remove(t);
                targets.splice(j,1);
                scene.remove(b);
                bullets.splice(i,1);
                score++;
                document.getElementById('score').innerText='Score: '+score;
            }
        });
    });
}

// ==== ANIMATION ====
const clock = new THREE.Clock();
function animate(){
    requestAnimationFrame(animate);
    const delta = clock.getDelta();

    bullets.forEach(b=>{
        b.position.add(b.userData.dir.clone().multiplyScalar(bulletSpeed*delta));
    });

    checkHit();
    renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>













































